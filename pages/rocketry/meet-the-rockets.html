<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>meet the rockets</title>
    <script src="/client/load-defaults.js"></script>
    <script src="/client/load-menu-bar.js"></script>
    <link rel="stylesheet" href="/bloggish.css" />
    <style>
      section {
        display: flex;
        flex-flow: row wrap;
        justify-content: space-around;
        align-items: center;
        margin: 40px;
        width: calc(100vw - 80px);
      }

      info {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: clamp(300px, 40vw, 600px);
      }

      info p {
        max-width: 50vw;
      }

      info li:before {
        content: "";
        margin-left: -0.5rem;
      }

      .rocket-profile {
        display: flex;
        height: clamp(250px, 30vw, 400px);
        border: var(--border-width) solid var(--border-color);
      }
    </style>
  </head>
  <body>
    <h1>meet the rockets</h1>
    <!-- <section>
      <img src="/images/img-not-found.jpg" alt="" />
      <info>
        <h2>name</h2>
        <deets>
          <strong>built from: </strong>Dec 5, 1991<strong> to: </strong>Dec 28,
          1992
        </deets>
        <p>
          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Repellendus,
          impedit? Aperiam accusamus perferendis beatae? Cum nostrum ad
          temporibus non molestiae accusamus ut vitae eos distinctio, voluptas
          mollitia, optio tenetur laboriosam tempore velit accusantium quod
          fugit aut exercitationem. Obcaecati, quaerat delectus nostrum
          incidunt, consectetur sed quisquam expedita minima qui, reprehenderit
          ratione?
        </p>
      </info>
    </section> -->
  </body>
  <script>
    $.get("/api/read/all/rockets", (rockets) => {
      rockets = rockets.filter((rock) => rock["flagship?"]);
      rockets = rockets.sort((rock1, rock2) => {
        let date2 = new Date(rock1.build_date_end ?? "2224-01-01");
        let date1 = new Date(rock2.build_date_end ?? "2224-01-01");
        return date1.valueOf() - date2.valueOf();
      });

      for (rock of rockets) {
        let id = rock.rocket_name.split(/[^\w:\u00C0-\u00FF]/gm).join("-");
        $("body").append(`<section id="${id}"></section>`);
        $("#" + id).append(
          `<img class="rocket-profile" src="/meet-the-rockets/${id}.webp" onerror="this.src='/meet-the-rockets/unknown-rocket-orange.webp';" />`
        );
        $("#" + id).append("<info></info>");
        $("#" + id + " info").append(`<h2>${rock.rocket_name}</h2>`);
        $("#" + id + " info").append("<deets></deets>");
        $("#" + id + " info").append("<p></p>");

        $("#" + id + " info p").append(rock.description);
        let start = niceDate(rock.build_date_start) ?? "???";
        let end = niceDate(rock.build_date_end) ?? "???";
        let deets = `<strong>built from:</strong> ${start} <strong>to:</strong> ${end}`;
        $("#" + id + " info deets").append(
          `<strong>built from:</strong> ${start}`
        );
        $("#" + id + " info deets").append(
          `<br><strong>finished:</strong> ${end}`
        );
        $("#" + id + " info deets").append(
          `<br><strong>method:</strong> ${rock.build_method}`
        );
        $("#" + id + " info deets").append(
          `<br><strong>mount size:</strong> ${rock.mount_diameter_mm} mm`
        );
      }
    });
  </script>
</html>
